# Welcome to Serverless!
#
# This file is the main config file for your service.
# It's very minimal at this point and uses default values.
# You can always add more config options for more control.
# We've included some commented out config examples here.
# Just uncomment any of them to get that config option.
#
# For full config options, check the docs:
#    docs.serverless.com
#
# Happy Coding!

service: ssacbotcustomresources
# app and org for use with dashboard.serverless.com
#app: your-app-name
#org: your-org-name

# You can pin your service to only deploy with a specific Serverless version
# Check out our docs for more details
frameworkVersion: '2'

provider:
  name: aws
  runtime: nodejs12.x

# you can overwrite defaults here
#  stage: dev
  region: eu-west-1

#you can add statements to the Lambda function's IAM Role here
  iamRoleStatements:
   - Effect: "Allow"
     Action:
       - "lex:PutBot"
       - "lex:DeleteBot"
       - "lex:GetBot"
       - "lex:PutIntent"
       - "lex:DeleteIntent"
       - "lex:GetIntent"
       - "lex:PutSlotType"
       - "lex:DeleteSlotType"
       - "lex:GetSlotType"
     Resource: '*'

functions:
  ssacBotCustomResource:
    handler: bot.deploy
  ssacIntentCustomResource:
    handler: intent.deploy
  ssacSlotTypeCustomResource:
    handler: slottype.deploy

resources:
  Outputs:
    SsacBotCustomResource:
      Description: "ARN for bot custom resource function"
      Value: !GetAtt SsacBotCustomResourceLambdaFunction.Arn
      Export:
        Name: "SsacBotCustomResourceFunction"
    SsacIntentCustomResource:
      Description: "ARN for bot intent custom resource function"
      Value: !GetAtt SsacIntentCustomResourceLambdaFunction.Arn
      Export:
        Name: "SsacIntentCustomResourceFunction"
    SsacSlotTypeCustomResource:
      Description: "ARN for bot slot type custom resource function"
      Value: !GetAtt SsacSlotTypeCustomResourceLambdaFunction.Arn
      Export:
        Name: "SsacSlotTypeCustomResourceFunction"